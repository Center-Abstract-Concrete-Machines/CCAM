---
const { nav, pathname } = Astro.props;
---

<a
    href={nav.url}
    class="flex justify-between items-center gap-4 sm:px-0 py-0.5 first:pt-0 last:pb-0 relative"
    data-name={nav.name}
    target={nav.new_window ? '_blank' : '_self'}
    aria-current={pathname.includes(nav.url) ? 'page' : 'false'}
>
    <div class="whitespace-nowrap font-mono">{nav.name}</div>
    <div aria-hidden="true" class="status-container">
        <span class="bracket bracket-l">
            <svg
                width="5"
                height="17"
                viewBox="0 0 5 17"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M0.478 16.628V0.176H4.078V1.4H1.828V15.404H4.078V16.628H0.478Z"
                    fill="currentColor"></path>
            </svg>
        </span>

        <span class="indicator">
            {
                () => {
                    switch (nav.name) {
                        case 'Follow':
                            return (
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="h-4 w-4 instagram"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        fill="currentColor"
                                        d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4zm9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8A1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5a5 5 0 0 1-5 5a5 5 0 0 1-5-5a5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3"
                                    />
                                </svg>
                            );
                        case 'Donate':
                            return (
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 24 24"
                                    class="h-4 w-4"
                                >
                                    <g
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                    >
                                        <>
                                            <path d="M15 11v.01M5.173 8.378a3 3 0 1 1 4.656-1.377" />
                                            <path d="M16 4v3.803A6.019 6.019 0 0 1 18.658 11h1.341a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-1.342c-.336.95-.907 1.8-1.658 2.473V19.5a1.5 1.5 0 0 1-3 0v-.583a6.04 6.04 0 0 1-1 .083h-4a6.04 6.04 0 0 1-1-.083v.583a1.5 1.5 0 0 1-3 0v-2.027A6 6 0 0 1 8.999 7h2.5z" />
                                        </>
                                    </g>
                                </svg>
                            );
                        default:
                            return (
                                <svg
                                    width="11"
                                    height="11"
                                    viewBox="0 0 13 12"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        id="star"
                                        fill="currentColor"
                                        stroke="none"
                                        d="M 6.51942 7.9044 L 4.26699 12 L 2.55825 10.9352 L 4.84951 7.0034 L 0.5 7.0444 L 0.5 4.955629 L 4.84951 4.99659 L 2.55825 1.06485 L 4.26699 0 L 6.51942 4.09556 L 8.6942 0 L 10.4417 1.06485 L 8.1505 4.99659 L 12.5 4.955629 L 12.5 7.0444 L 8.1505 7.0034 L 10.4417 10.9352 L 8.6942 12 L 6.51942 7.9044 Z"
                                    />
                                </svg>
                            );
                    }
                }
            }
        </span>

        <span class="bracket bracket-r">
            <svg
                width="5"
                height="17"
                viewBox="0 0 5 17"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M4.322 16.628H0.722V15.404H2.972V1.4H0.722V0.176H4.322V16.628Z"
                    fill="currentColor"></path>
            </svg>
        </span>
    </div>
</a>

<style>
    .status-container {
        display: grid;
        grid-template-columns: [status-start] auto auto [status-end];
        grid-template-rows: [status-start] auto [status-end];
        justify-items: center;
        align-items: center;
        gap: 1rem;
        white-space: nowrap;
    }
    .indicator {
        opacity: 0;
        grid-column: status;
        grid-row: status;
        place-self: center;
    }
    .bracket {
        grid-row: 1;
        text-align: center;
    }
    .bracket-l {
        grid-column: 1 / 2;
    }
    .bracket-r {
        grid-column: 2 / 3;
    }
    a[aria-current='page'] .indicator,
    a:hover .indicator {
        opacity: 1;
    }
</style>
